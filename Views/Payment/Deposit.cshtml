@{
    ViewData["Title"] = "Nạp tiền";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header text-center">
                    <h4>Nạp tiền vào tài khoản</h4>
                </div>
                <div class="card-body">
                    @if (TempData["Error"] != null)
                    {
                        <div class="alert alert-danger">
                            @TempData["Error"]
                        </div>
                    }

                    <form asp-action="ProcessDeposit" asp-controller="Payment" method="post">
                        <div class="mb-4">
                            <label class="form-label">Chọn số tiền:</label>
                            <div class="d-flex flex-wrap gap-2 mb-3">
                                <button type="button" class="btn btn-outline-primary amount-btn" data-amount="50000">50,000 ₫</button>
                                <button type="button" class="btn btn-outline-primary amount-btn" data-amount="100000">100,000 ₫</button>
                                <button type="button" class="btn btn-outline-primary amount-btn" data-amount="200000">200,000 ₫</button>
                                <button type="button" class="btn btn-outline-primary amount-btn" data-amount="500000">500,000 ₫</button>
                                <button type="button" class="btn btn-outline-primary amount-btn" data-amount="1000000">1,000,000 ₫</button>
                            </div>
                            <div class="mb-3">
                                <label for="custom-amount" class="form-label">Hoặc nhập số tiền khác:</label>
                                <div class="input-group">
                                    <input type="number" id="amount-input" name="amount" class="form-control" required min="10000" step="1000" placeholder="Nhập số tiền">
                                    <span class="input-group-text">VNĐ</span>
                                </div>
                                <small class="text-muted">Số tiền tối thiểu là 10,000 VNĐ</small>
                            </div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Tiếp tục thanh toán</button>
                        </div>
                    </form>
                </div>
                <div class="card-footer">
                    <div class="text-center">
                        <img src="/images/vnpay-logo.png" alt="VNPay" height="30" class="me-2">
                        <small class="text-muted">Thanh toán an toàn qua VNPay</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const amountBtns = document.querySelectorAll('.amount-btn');
            const amountInput = document.getElementById('amount-input');

            amountBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Xóa active class từ tất cả các nút
                    amountBtns.forEach(b => b.classList.remove('active', 'btn-primary'));
                    amountBtns.forEach(b => b.classList.add('btn-outline-primary'));

                    // Thêm active class vào nút được chọn
                    this.classList.remove('btn-outline-primary');
                    this.classList.add('active', 'btn-primary');

                    // Cập nhật giá trị input
                    const amount = this.getAttribute('data-amount');
                    amountInput.value = amount;
                });
            });

            // Xử lý khi người dùng nhập số tiền trực tiếp
            amountInput.addEventListener('input', function() {
                // Xóa active class từ tất cả các nút
                amountBtns.forEach(btn => {
                    btn.classList.remove('active', 'btn-primary');
                    btn.classList.add('btn-outline-primary');
                });
            });
        });
    </script>
}